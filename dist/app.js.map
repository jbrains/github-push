{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","ComponentManager","permissions","onReady","sentMessages","messageQueue","loggingEnabled","onReadyCallback","window","addEventListener","event","console","log","data","handleMessage","bind","payload","action","sessionKey","componentData","activateThemes","themes","original","originalMessage","filter","message","messageId","callback","postMessage","key","value","push","generateUUID","api","sentMessage","JSON","parse","stringify","parent","type","width","height","content_types","tags","items","item","jsonObjectForItem","associateItem","content_type","deleteItems","params","map","saveItems","copy","Object","assign","children","urls","deactivateAllCustomThemes","url","link","document","createElement","href","rel","media","className","getElementsByTagName","appendChild","elements","getElementsByClassName","forEach","element","disabled","parentNode","removeChild","crypto","msCrypto","buf","Uint32Array","getRandomValues","idx","replace","c","v","toString","d","Date","getTime","performance","now","uuid","Math","random","floor","angular","HomeCtrl","$rootScope","$scope","$timeout","formData","loading","pushStatus","name","componentManager","defaultHeight","streamContextItem","note","repos","loadRepoDataForCurrentNote","token","componentDataValueForKey","onTokenSet","submitToken","setComponentDataValueForKey","gh","GitHub","me","getUser","loadingRepos","listRepos","err","alert","noteData","savedNote","noteFileExtension","fileExtension","selectRepoWithName","repoName","defaultRepo","hasDefaultRepo","defaultFileExtension","selectedRepo","repo","didSelectRepo","selectedRepoObject","getRepo","owner","login","setDataForNote","notesData","pushChanges","$event","target","blur","commitMessage","content","title","writeFile","text","encode","result","logout","clearComponentData","setSize","$$ngIsClass","controller"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nclass ComponentManager {\n\n  constructor(permissions, onReady) {\n    this.sentMessages = [];\n    this.messageQueue = [];\n    this.permissions = permissions;\n    this.loggingEnabled = false;\n    this.onReadyCallback = onReady;\n\n    window.addEventListener(\"message\", function (event) {\n      if (this.loggingEnabled) {\n        console.log(\"Components API Message received:\", event.data);\n      }\n      this.handleMessage(event.data);\n    }.bind(this), false);\n  }\n\n  handleMessage(payload) {\n    if (payload.action === \"component-registered\") {\n      this.sessionKey = payload.sessionKey;\n      this.componentData = payload.componentData;\n      this.onReady();\n\n      if (this.loggingEnabled) {\n        console.log(\"Component successfully registered with payload:\", payload);\n      }\n    } else if (payload.action === \"themes\") {\n      this.activateThemes(payload.data.themes);\n    } else if (payload.original) {\n      // get callback from queue\n      var originalMessage = this.sentMessages.filter(function (message) {\n        return message.messageId === payload.original.messageId;\n      })[0];\n\n      if (originalMessage.callback) {\n        originalMessage.callback(payload.data);\n      }\n    }\n  }\n\n  onReady() {\n    for (var message of this.messageQueue) {\n      this.postMessage(message.action, message.data, message.callback);\n    }\n    this.messageQueue = [];\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  setComponentDataValueForKey(key, value) {\n    this.componentData[key] = value;\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  clearComponentData() {\n    this.componentData = {};\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  componentDataValueForKey(key) {\n    return this.componentData[key];\n  }\n\n  postMessage(action, data, callback) {\n    if (!this.sessionKey) {\n      this.messageQueue.push({\n        action: action,\n        data: data,\n        callback: callback\n      });\n      return;\n    }\n\n    var message = {\n      action: action,\n      data: data,\n      messageId: this.generateUUID(),\n      sessionKey: this.sessionKey,\n      permissions: this.permissions,\n      api: \"component\"\n    };\n\n    var sentMessage = JSON.parse(JSON.stringify(message));\n    sentMessage.callback = callback;\n    this.sentMessages.push(sentMessage);\n\n    if (this.loggingEnabled) {\n      console.log(\"Posting message:\", message);\n    }\n\n    window.parent.postMessage(message, '*');\n  }\n\n  setSize(type, width, height) {\n    this.postMessage(\"set-size\", { type: type, width: width, height: height }, function (data) {});\n  }\n\n  streamItems(callback) {\n    this.postMessage(\"stream-items\", { content_types: [\"Tag\"] }, function (data) {\n      var tags = data.items;\n      callback(tags);\n    }.bind(this));\n  }\n\n  streamContextItem(callback) {\n    this.postMessage(\"stream-context-item\", null, function (data) {\n      var item = data.item;\n      callback(item);\n    }.bind(this));\n  }\n\n  selectItem(item) {\n    this.postMessage(\"select-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  createItem(item) {\n    this.postMessage(\"create-item\", { item: this.jsonObjectForItem(item) }, function (data) {\n      var item = data.item;\n      this.associateItem(item);\n    }.bind(this));\n  }\n\n  associateItem(item) {\n    this.postMessage(\"associate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  deassociateItem(item) {\n    this.postMessage(\"deassociate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  clearSelection() {\n    this.postMessage(\"clear-selection\", { content_type: \"Tag\" });\n  }\n\n  deleteItem(item) {\n    this.deleteItems([item]);\n  }\n\n  deleteItems(items) {\n    var params = {\n      items: items.map(function (item) {\n        return this.jsonObjectForItem(item);\n      }.bind(this))\n    };\n    this.postMessage(\"delete-items\", params);\n  }\n\n  saveItem(item) {\n    this.saveItems([item]);\n  }\n\n  saveItems(items) {\n    items = items.map(function (item) {\n      return this.jsonObjectForItem(item);\n    }.bind(this));\n\n    this.postMessage(\"save-items\", { items: items }, function (data) {});\n  }\n\n  jsonObjectForItem(item) {\n    var copy = Object.assign({}, item);\n    copy.children = null;\n    copy.parent = null;\n    return copy;\n  }\n\n  /* Themes */\n\n  activateThemes(urls) {\n    this.deactivateAllCustomThemes();\n\n    if (this.loggingEnabled) {\n      console.log(\"Activating themes:\", urls);\n    }\n\n    if (!urls) {\n      return;\n    }\n\n    for (var url of urls) {\n      if (!url) {\n        continue;\n      }\n\n      var link = document.createElement(\"link\");\n      link.href = url;\n      link.type = \"text/css\";\n      link.rel = \"stylesheet\";\n      link.media = \"screen,print\";\n      link.className = \"custom-theme\";\n      document.getElementsByTagName(\"head\")[0].appendChild(link);\n    }\n  }\n\n  deactivateAllCustomThemes() {\n    var elements = document.getElementsByClassName(\"custom-theme\");\n\n    [].forEach.call(elements, function (element) {\n      if (element) {\n        element.disabled = true;\n        element.parentNode.removeChild(element);\n      }\n    });\n  }\n\n  /* Utilities */\n\n  generateUUID() {\n    var crypto = window.crypto || window.msCrypto;\n    if (crypto) {\n      var buf = new Uint32Array(4);\n      crypto.getRandomValues(buf);\n      var idx = -1;\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        idx++;\n        var r = buf[idx >> 3] >> idx % 8 * 4 & 15;\n        var v = c == 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    } else {\n      var d = new Date().getTime();\n      if (window.performance && typeof window.performance.now === \"function\") {\n        d += performance.now(); //use high-precision timer if available\n      }\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n      });\n      return uuid;\n    }\n  }\n}\n\nwindow.ComponentManager = ComponentManager;\n\n\n},{}]},{},[1]);\n;'use strict';\n\nangular.module('app', [\n\n])\n;class HomeCtrl {\n  constructor($rootScope, $scope, $timeout) {\n\n    $scope.formData = {loading: true, pushStatus: \"Push Changes\"};\n\n    var permissions = [\n      {\n        name: \"stream-context-item\"\n      }\n    ]\n\n    let componentManager = new window.ComponentManager(permissions, function(){\n      $scope.formData.loading = false;\n      $scope.onReady();\n    });\n\n    let defaultHeight = 50;\n\n    componentManager.streamContextItem(function(item){\n      $timeout(function(){\n        $scope.note = item;\n        if($scope.repos) {\n          $scope.loadRepoDataForCurrentNote();\n        }\n      })\n    })\n\n    $scope.onReady = function() {\n      $scope.token = componentManager.componentDataValueForKey(\"token\");\n      if($scope.token) {\n        $scope.onTokenSet();\n      }\n    }\n\n    $scope.submitToken = function() {\n      $scope.token = $scope.formData.token;\n      componentManager.setComponentDataValueForKey(\"token\", $scope.token);\n      $scope.onTokenSet();\n    }\n\n    $scope.onTokenSet = function() {\n\n      $scope.gh = new GitHub({\n        token: $scope.token\n      });\n\n      var me = $scope.gh.getUser();\n      $scope.formData.loadingRepos = true;\n\n      me.listRepos(function(err, repos) {\n        $timeout(function(){\n          $scope.formData.loadingRepos = false;\n          if(err) {\n            alert(\"An error occurred with the GitHub Push extension. Make sure your GitHub token is valid and try again.\")\n            return;\n          }\n          $scope.repos = repos;\n          if($scope.note) {\n            $scope.loadRepoDataForCurrentNote();\n          }\n        })\n      });\n    }\n\n    $scope.loadRepoDataForCurrentNote = function() {\n      var noteData = componentManager.componentDataValueForKey(\"notes\") || {};\n      var savedNote = noteData[$scope.note.uuid];\n      if(savedNote) {\n        // per note preference\n        $scope.noteFileExtension = savedNote.fileExtension;\n        $scope.selectRepoWithName(savedNote.repoName);\n      } else {\n        // default pref\n        var defaultRepo = componentManager.componentDataValueForKey(\"defaultRepo\");\n        if(defaultRepo) {\n          $scope.formData.hasDefaultRepo = true;\n          $scope.selectRepoWithName(defaultRepo);\n        }\n      }\n\n      $scope.defaultFileExtension = componentManager.componentDataValueForKey(\"defaultFileExtension\");\n      $scope.formData.fileExtension = $scope.noteFileExtension || $scope.defaultFileExtension || \"txt\";\n    }\n\n\n    $scope.selectRepoWithName = function(name) {\n      $scope.formData.selectedRepo = $scope.repos.filter(function(repo){\n        return repo.name === name;\n      })[0];\n      $scope.didSelectRepo();\n    }\n\n    $scope.didSelectRepo = function() {\n      var repo = $scope.formData.selectedRepo;\n      $scope.selectedRepoObject = $scope.gh.getRepo(repo.owner.login, repo.name);\n\n      // save this as default repo for this note\n      $scope.setDataForNote(\"repoName\", repo.name);\n\n      // save this as default repo globally\n      if(!$scope.formData.hasDefaultRepo) {\n        componentManager.setComponentDataValueForKey(\"defaultRepo\", repo.name);\n      }\n    }\n\n    $scope.setDataForNote = function(key, value) {\n      var notesData = componentManager.componentDataValueForKey(\"notes\") || {};\n      var noteData = notesData[$scope.note.uuid] || {};\n      noteData[key] = value;\n      notesData[$scope.note.uuid] = noteData;\n      componentManager.setComponentDataValueForKey(\"notes\", notesData);\n    }\n\n    $scope.pushChanges = function($event) {\n      $event.target.blur();\n      var message = $scope.formData.commitMessage || `Updated note '${$scope.note.content.title}'`;\n\n      var fileExtension = $scope.formData.fileExtension;\n      if(!$scope.defaultFileExtension) {\n        // set this as default\n        componentManager.setComponentDataValueForKey(\"defaultFileExtension\", fileExtension);\n        $scope.defaultFileExtension = fileExtension;\n      }\n\n      if(fileExtension !== $scope.noteFileExtension) {\n        // set this ext for this note\n        $scope.setDataForNote(\"fileExtension\", fileExtension);\n        $scope.noteFileExtension = fileExtension;\n      }\n\n      $scope.formData.pushStatus = \"Pushing...\";\n      $scope.selectedRepoObject.writeFile(\"master\", $scope.note.content.title + \".\" + fileExtension, $scope.note.content.text, message, {encode: true}, function(err, result){\n        $timeout(function(){\n          if(!err) {\n            $scope.formData.commitMessage = \"\";\n            $scope.formData.pushStatus = \"Success!\";\n            $timeout(function(){\n              $scope.formData.pushStatus = \"Push Changes\";\n            }, 1500)\n          } else {\n            alert(\"Something went wrong trying to push your changes.\", + err);\n          }\n        })\n      });\n    }\n\n    $scope.logout = function() {\n      componentManager.clearComponentData();\n      $scope.defaultFileExtension = null;\n      $scope.noteFileExtension = null;\n      $scope.selectedRepo = null;\n      $scope.repos = null;\n      $scope.token = null;\n    }\n\n    componentManager.setSize(\"container\", \"100%\", defaultHeight);\n\n\n  }\n}\n\n// required for FireFox\nHomeCtrl.$$ngIsClass = true;\n\nangular.module('app').controller('HomeCtrl', HomeCtrl);\n"]}