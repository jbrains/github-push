{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","ComponentManager","permissions","onReady","sentMessages","messageQueue","loggingEnabled","onReadyCallback","window","addEventListener","event","console","log","data","handleMessage","bind","payload","action","sessionKey","componentData","activateThemes","themes","original","originalMessage","filter","message","messageId","callback","postMessage","key","value","push","generateUUID","api","sentMessage","JSON","parse","stringify","parent","type","width","height","content_types","tags","items","item","jsonObjectForItem","associateItem","content_type","deleteItems","params","map","saveItems","copy","Object","assign","children","urls","deactivateAllCustomThemes","url","link","document","createElement","href","rel","media","className","getElementsByTagName","appendChild","elements","getElementsByClassName","forEach","element","disabled","parentNode","removeChild","crypto","msCrypto","buf","Uint32Array","getRandomValues","idx","replace","c","v","toString","d","Date","getTime","performance","now","uuid","Math","random","floor","angular","HomeCtrl","$rootScope","$scope","$timeout","formData","loading","pushStatus","name","componentManager","defaultHeight","streamContextItem","note","repos","loadRepoDataForCurrentNote","token","componentDataValueForKey","onTokenSet","submitToken","setComponentDataValueForKey","gh","GitHub","me","getUser","loadingRepos","listRepos","err","alert","noteData","savedNote","noteFileExtension","fileExtension","noteFileDirectory","fileDirectory","selectRepoWithName","repoName","defaultRepo","hasDefaultRepo","defaultFileExtension","defaultFileDirectory","selectedRepo","repo","didSelectRepo","selectedRepoObject","getRepo","owner","login","setDataForNote","notesData","sanitizeFileDirectory","$directory","pushChanges","$event","target","blur","commitMessage","content","title","writeFile","text","encode","result","logout","clearComponentData","setSize","$$ngIsClass","controller"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nclass ComponentManager {\n\n  constructor(permissions, onReady) {\n    this.sentMessages = [];\n    this.messageQueue = [];\n    this.permissions = permissions;\n    this.loggingEnabled = false;\n    this.onReadyCallback = onReady;\n\n    window.addEventListener(\"message\", function (event) {\n      if (this.loggingEnabled) {\n        console.log(\"Components API Message received:\", event.data);\n      }\n      this.handleMessage(event.data);\n    }.bind(this), false);\n  }\n\n  handleMessage(payload) {\n    if (payload.action === \"component-registered\") {\n      this.sessionKey = payload.sessionKey;\n      this.componentData = payload.componentData;\n      this.onReady();\n\n      if (this.loggingEnabled) {\n        console.log(\"Component successfully registered with payload:\", payload);\n      }\n    } else if (payload.action === \"themes\") {\n      this.activateThemes(payload.data.themes);\n    } else if (payload.original) {\n      // get callback from queue\n      var originalMessage = this.sentMessages.filter(function (message) {\n        return message.messageId === payload.original.messageId;\n      })[0];\n\n      if (originalMessage.callback) {\n        originalMessage.callback(payload.data);\n      }\n    }\n  }\n\n  onReady() {\n    for (var message of this.messageQueue) {\n      this.postMessage(message.action, message.data, message.callback);\n    }\n    this.messageQueue = [];\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  setComponentDataValueForKey(key, value) {\n    this.componentData[key] = value;\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  clearComponentData() {\n    this.componentData = {};\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  componentDataValueForKey(key) {\n    return this.componentData[key];\n  }\n\n  postMessage(action, data, callback) {\n    if (!this.sessionKey) {\n      this.messageQueue.push({\n        action: action,\n        data: data,\n        callback: callback\n      });\n      return;\n    }\n\n    var message = {\n      action: action,\n      data: data,\n      messageId: this.generateUUID(),\n      sessionKey: this.sessionKey,\n      permissions: this.permissions,\n      api: \"component\"\n    };\n\n    var sentMessage = JSON.parse(JSON.stringify(message));\n    sentMessage.callback = callback;\n    this.sentMessages.push(sentMessage);\n\n    if (this.loggingEnabled) {\n      console.log(\"Posting message:\", message);\n    }\n\n    window.parent.postMessage(message, '*');\n  }\n\n  setSize(type, width, height) {\n    this.postMessage(\"set-size\", { type: type, width: width, height: height }, function (data) {});\n  }\n\n  streamItems(callback) {\n    this.postMessage(\"stream-items\", { content_types: [\"Tag\"] }, function (data) {\n      var tags = data.items;\n      callback(tags);\n    }.bind(this));\n  }\n\n  streamContextItem(callback) {\n    this.postMessage(\"stream-context-item\", null, function (data) {\n      var item = data.item;\n      callback(item);\n    }.bind(this));\n  }\n\n  selectItem(item) {\n    this.postMessage(\"select-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  createItem(item) {\n    this.postMessage(\"create-item\", { item: this.jsonObjectForItem(item) }, function (data) {\n      var item = data.item;\n      this.associateItem(item);\n    }.bind(this));\n  }\n\n  associateItem(item) {\n    this.postMessage(\"associate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  deassociateItem(item) {\n    this.postMessage(\"deassociate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  clearSelection() {\n    this.postMessage(\"clear-selection\", { content_type: \"Tag\" });\n  }\n\n  deleteItem(item) {\n    this.deleteItems([item]);\n  }\n\n  deleteItems(items) {\n    var params = {\n      items: items.map(function (item) {\n        return this.jsonObjectForItem(item);\n      }.bind(this))\n    };\n    this.postMessage(\"delete-items\", params);\n  }\n\n  saveItem(item) {\n    this.saveItems([item]);\n  }\n\n  saveItems(items) {\n    items = items.map(function (item) {\n      return this.jsonObjectForItem(item);\n    }.bind(this));\n\n    this.postMessage(\"save-items\", { items: items }, function (data) {});\n  }\n\n  jsonObjectForItem(item) {\n    var copy = Object.assign({}, item);\n    copy.children = null;\n    copy.parent = null;\n    return copy;\n  }\n\n  /* Themes */\n\n  activateThemes(urls) {\n    this.deactivateAllCustomThemes();\n\n    if (this.loggingEnabled) {\n      console.log(\"Activating themes:\", urls);\n    }\n\n    if (!urls) {\n      return;\n    }\n\n    for (var url of urls) {\n      if (!url) {\n        continue;\n      }\n\n      var link = document.createElement(\"link\");\n      link.href = url;\n      link.type = \"text/css\";\n      link.rel = \"stylesheet\";\n      link.media = \"screen,print\";\n      link.className = \"custom-theme\";\n      document.getElementsByTagName(\"head\")[0].appendChild(link);\n    }\n  }\n\n  deactivateAllCustomThemes() {\n    var elements = document.getElementsByClassName(\"custom-theme\");\n\n    [].forEach.call(elements, function (element) {\n      if (element) {\n        element.disabled = true;\n        element.parentNode.removeChild(element);\n      }\n    });\n  }\n\n  /* Utilities */\n\n  generateUUID() {\n    var crypto = window.crypto || window.msCrypto;\n    if (crypto) {\n      var buf = new Uint32Array(4);\n      crypto.getRandomValues(buf);\n      var idx = -1;\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        idx++;\n        var r = buf[idx >> 3] >> idx % 8 * 4 & 15;\n        var v = c == 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    } else {\n      var d = new Date().getTime();\n      if (window.performance && typeof window.performance.now === \"function\") {\n        d += performance.now(); //use high-precision timer if available\n      }\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n      });\n      return uuid;\n    }\n  }\n}\n\nwindow.ComponentManager = ComponentManager;\n\n\n},{}]},{},[1]);\n;'use strict';\r\n\r\nangular.module('app', [\r\n\r\n])\r\n;class HomeCtrl {\r\n  constructor($rootScope, $scope, $timeout) {\r\n\r\n    $scope.formData = {loading: true, pushStatus: \"Push Changes\"};\r\n\r\n    var permissions = [\r\n      {\r\n        name: \"stream-context-item\"\r\n      }\r\n    ]\r\n\r\n    let componentManager = new window.ComponentManager(permissions, function(){\r\n      $scope.formData.loading = false;\r\n      $scope.onReady();\r\n    });\r\n\r\n    let defaultHeight = 50;\r\n\r\n    componentManager.streamContextItem(function(item){\r\n      $timeout(function(){\r\n        $scope.note = item;\r\n        if($scope.repos) {\r\n          $scope.loadRepoDataForCurrentNote();\r\n        }\r\n      })\r\n    })\r\n\r\n    $scope.onReady = function() {\r\n      $scope.token = componentManager.componentDataValueForKey(\"token\");\r\n      if($scope.token) {\r\n        $scope.onTokenSet();\r\n      }\r\n    }\r\n\r\n    $scope.submitToken = function() {\r\n      $scope.token = $scope.formData.token;\r\n      componentManager.setComponentDataValueForKey(\"token\", $scope.token);\r\n      $scope.onTokenSet();\r\n    }\r\n\r\n    $scope.onTokenSet = function() {\r\n\r\n      $scope.gh = new GitHub({\r\n        token: $scope.token\r\n      });\r\n\r\n      var me = $scope.gh.getUser();\r\n      $scope.formData.loadingRepos = true;\r\n\r\n      me.listRepos(function(err, repos) {\r\n        $timeout(function(){\r\n          $scope.formData.loadingRepos = false;\r\n          if(err) {\r\n            alert(\"An error occurred with the GitHub Push extension. Make sure your GitHub token is valid and try again.\")\r\n            return;\r\n          }\r\n          $scope.repos = repos;\r\n          if($scope.note) {\r\n            $scope.loadRepoDataForCurrentNote();\r\n          }\r\n        })\r\n      });\r\n    }\r\n\r\n    $scope.loadRepoDataForCurrentNote = function() {\r\n      var noteData = componentManager.componentDataValueForKey(\"notes\") || {};\r\n      var savedNote = noteData[$scope.note.uuid];\r\n      if(savedNote) {\r\n        // per note preference\r\n        $scope.noteFileExtension = savedNote.fileExtension;\r\n        $scope.noteFileDirectory = savedNote.fileDirectory;\r\n        $scope.selectRepoWithName(savedNote.repoName);\r\n      } else {\r\n        // default pref\r\n        var defaultRepo = componentManager.componentDataValueForKey(\"defaultRepo\");\r\n        if(defaultRepo) {\r\n          $scope.formData.hasDefaultRepo = true;\r\n          $scope.selectRepoWithName(defaultRepo);\r\n        }\r\n      }\r\n\r\n      $scope.defaultFileExtension = componentManager.componentDataValueForKey(\"defaultFileExtension\");\r\n      $scope.formData.fileExtension = $scope.noteFileExtension || $scope.defaultFileExtension || \"txt\";\r\n      \r\n      $scope.defaultFileDirectory = componentManager.componentDataValueForKey(\"defaultFileDirectory\");\r\n      $scope.formData.fileDirectory = $scope.noteFileDirectory || $scope.defaultFileDirectory || \"\";\r\n    }\r\n\r\n\r\n    $scope.selectRepoWithName = function(name) {\r\n      $scope.formData.selectedRepo = $scope.repos.filter(function(repo){\r\n        return repo.name === name;\r\n      })[0];\r\n      $scope.didSelectRepo();\r\n    }\r\n\r\n    $scope.didSelectRepo = function() {\r\n      var repo = $scope.formData.selectedRepo;\r\n      $scope.selectedRepoObject = $scope.gh.getRepo(repo.owner.login, repo.name);\r\n\r\n      // save this as default repo for this note\r\n      $scope.setDataForNote(\"repoName\", repo.name);\r\n\r\n      // save this as default repo globally\r\n      if(!$scope.formData.hasDefaultRepo) {\r\n        componentManager.setComponentDataValueForKey(\"defaultRepo\", repo.name);\r\n      }\r\n    }\r\n\r\n    $scope.setDataForNote = function(key, value) {\r\n      var notesData = componentManager.componentDataValueForKey(\"notes\") || {};\r\n      var noteData = notesData[$scope.note.uuid] || {};\r\n      noteData[key] = value;\r\n      notesData[$scope.note.uuid] = noteData;\r\n      componentManager.setComponentDataValueForKey(\"notes\", notesData);\r\n    }\r\n\r\n    $scope.sanitizeFileDirectory = function($directory) {\r\n      // if no directory is given, then push to root.\r\n      if (!$directory)\r\n        return '';\r\n      \r\n      // try to ensure they haven't attempted any funny business with escape strings by turning\r\n      // any backslashes into forward slashes - then replace any duplicate slashes with a single\r\n      // slash.\r\n      return $directory = $directory\r\n        // make sure the last symbol is a '/'\r\n        .replace(/[/]*$/g, '/')\r\n        // make sure there are no escaping slashes.\r\n        .replace(/\\\\/g, '/')\r\n        // make sure there are no double '//'.\r\n        .replace(/\\/\\//g, '/')\r\n        // make sure the directory does not start with\r\n        // a '/'.\r\n        .replace(/^\\/+/g, '');\r\n    }\r\n\r\n    $scope.pushChanges = function($event) {\r\n      $event.target.blur();\r\n      var message = $scope.formData.commitMessage || `Updated note '${$scope.note.content.title}'`;\r\n\r\n      var fileExtension = $scope.formData.fileExtension;\r\n      var fileDirectory = $scope.formData.fileDirectory;\r\n      if(!$scope.defaultFileExtension) {\r\n        // set this as default\r\n        componentManager.setComponentDataValueForKey(\"defaultFileExtension\", fileExtension);\r\n        $scope.defaultFileExtension = fileExtension;\r\n      }\r\n\r\n      if(fileExtension !== $scope.noteFileExtension) {\r\n        // set this ext for this note\r\n        $scope.setDataForNote(\"fileExtension\", fileExtension);\r\n        $scope.noteFileExtension = fileExtension;\r\n      }\r\n\r\n      if(!$scope.defaultFileDirectory) {\r\n        // set this as default\r\n        componentManager.setComponentDataValueForKey(\"defaultFileDirectory\", fileDirectory);\r\n        $scope.defaultFileDirectory = fileDirectory;\r\n      }\r\n\r\n      if(fileDirectory !== $scope.noteFileDirectory) {\r\n        // set this directory for the note\r\n        $scope.setDataForNote(\"fileDirectory\", fileDirectory);\r\n        $scope.noteFileDirectory = fileDirectory;\r\n      }\r\n\r\n      $scope.formData.pushStatus = \"Pushing...\";\r\n      $scope.selectedRepoObject.writeFile(\"master\", $scope.sanitizeFileDirectory(fileDirectory) + $scope.note.content.title + \".\" + fileExtension, $scope.note.content.text, message, {encode: true}, function(err, result){\r\n        $timeout(function(){\r\n          if(!err) {\r\n            $scope.formData.commitMessage = \"\";\r\n            $scope.formData.pushStatus = \"Success!\";\r\n            $timeout(function(){\r\n              $scope.formData.pushStatus = \"Push Changes\";\r\n            }, 1500)\r\n          } else {\r\n            alert(\"Something went wrong trying to push your changes.\", + err);\r\n          }\r\n        })\r\n      });\r\n    }\r\n\r\n    $scope.logout = function() {\r\n      componentManager.clearComponentData();\r\n      $scope.defaultFileExtension = null;\r\n      $scope.defaultFileDirectory = null;\r\n      $scope.noteFileExtension = null;\r\n      $scope.noteFileDirectory = null;\r\n      $scope.selectedRepo = null;\r\n      $scope.repos = null;\r\n      $scope.token = null;\r\n    }\r\n\r\n    componentManager.setSize(\"container\", \"100%\", defaultHeight);\r\n\r\n\r\n  }\r\n}\r\n\r\n// required for FireFox\r\nHomeCtrl.$$ngIsClass = true;\r\n\r\nangular.module('app').controller('HomeCtrl', HomeCtrl);\r\n"]}